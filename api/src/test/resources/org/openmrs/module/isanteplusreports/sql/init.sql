DROP TABLE IF EXISTS "ARV_DRUGS";
CREATE TABLE "ARV_DRUGS" (
  "ID" int GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
  "DRUG_ID" int NOT NULL,
  "DRUG_NAME" clob NOT NULL,
  "DATE_INSERTED" date NOT NULL,
  PRIMARY KEY ("ID"),
  CONSTRAINT "DRUG_ID"
    UNIQUE ("DRUG_ID")
);
DROP TABLE IF EXISTS "DISCONTINUATION_REASON";
CREATE TABLE "DISCONTINUATION_REASON" (
  "PATIENT_ID" int DEFAULT '0' NOT NULL,
  "VISIT_ID" int DEFAULT '0' NOT NULL,
  "VISIT_DATE" date DEFAULT NULL,
  "REASON" int DEFAULT '0' NOT NULL,
  "REASON_NAME" clob,
  "LAST_UPDATED_DATE" timestamp DEFAULT NULL,
  PRIMARY KEY (
    "PATIENT_ID",
    "VISIT_ID",
    "REASON"
  )
);
DROP TABLE IF EXISTS "HEALTH_QUAL_PATIENT_VISIT";
CREATE TABLE "HEALTH_QUAL_PATIENT_VISIT" (
  "PATIENT_ID" int DEFAULT '0' NOT NULL,
  "ENCOUNTER_ID" int DEFAULT '0' NOT NULL,
  "VISIT_DATE" date DEFAULT NULL,
  "VISIT_ID" int DEFAULT NULL,
  "LOCATION_ID" int DEFAULT '0' NOT NULL,
  "ENCOUNTER_TYPE" int DEFAULT NULL,
  "PATIENT_BMI" double DEFAULT NULL,
  "ADHERENCE_EVALUATION" int DEFAULT NULL,
  "FAMILY_PLANNING_METHOD_USED" tinyint DEFAULT '0',
  "EVALUATED_OF_TB" tinyint DEFAULT '0',
  "NUTRITIONAL_ASSESSMENT_COMPLETED" tinyint DEFAULT '0',
  "IS_ACTIVE_TB" tinyint DEFAULT '0',
  "AGE_IN_YEARS" int DEFAULT NULL,
  "LAST_INSERT_DATE" date DEFAULT NULL,
  "LAST_UPDATED_DATE" timestamp DEFAULT NULL,
  "VOIDED" tinyint DEFAULT NULL,
  PRIMARY KEY (
    "PATIENT_ID",
    "ENCOUNTER_ID",
    "LOCATION_ID"
  )
);
DROP TABLE IF EXISTS "PATIENT";
CREATE TABLE "PATIENT" (
  "IDENTIFIER" varchar(50) DEFAULT NULL,
  "ST_ID" varchar(50) DEFAULT NULL,
  "NATIONAL_ID" varchar(50) DEFAULT NULL,
  "PATIENT_ID" int NOT NULL,
  "LOCATION_ID" int DEFAULT NULL,
  "GIVEN_NAME" clob,
  "FAMILY_NAME" clob,
  "GENDER" varchar(10) DEFAULT NULL,
  "BIRTHDATE" date DEFAULT NULL,
  "TELEPHONE" varchar(50) DEFAULT NULL,
  "LAST_ADDRESS" clob,
  "DEGREE" clob,
  "VIH_STATUS" int DEFAULT '0',
  "ARV_STATUS" int DEFAULT NULL,
  "MOTHER_NAME" clob,
  "OCCUPATION" int DEFAULT NULL,
  "MARITALSTATUS" int DEFAULT NULL,
  "PLACE_OF_BIRTH" clob,
  "CREATOR" varchar(20) DEFAULT NULL,
  "DATE_CREATED" date DEFAULT NULL,
  "DEATH_DATE" date DEFAULT NULL,
  "CAUSE_OF_DEATH" clob,
  "FIRST_VISIT_DATE" timestamp DEFAULT NULL,
  "LAST_VISIT_DATE" timestamp DEFAULT NULL,
  "DATE_STARTED_ARV" timestamp DEFAULT NULL,
  "NEXT_VISIT_DATE" date DEFAULT NULL,
  "LAST_INSERTED_DATE" timestamp DEFAULT NULL,
  "LAST_UPDATED_DATE" timestamp DEFAULT NULL,
  "VOIDED" tinyint DEFAULT NULL,
  PRIMARY KEY ("PATIENT_ID")
);
DROP TABLE IF EXISTS "PATIENT_DIAGNOSIS";
CREATE TABLE "PATIENT_DIAGNOSIS" (
  "PATIENT_ID" int DEFAULT NULL,
  "ENCOUNTER_ID" int DEFAULT '0' NOT NULL,
  "LOCATION_ID" int DEFAULT '0' NOT NULL,
  "ENCOUNTER_DATE" date DEFAULT NULL,
  "CONCEPT_GROUP" int DEFAULT '0' NOT NULL,
  "OBS_GROUP_ID" int DEFAULT NULL,
  "CONCEPT_ID" int DEFAULT '0' NOT NULL,
  "ANSWER_CONCEPT_ID" int DEFAULT '0' NOT NULL,
  "SUSPECTED_CONFIRMED" int DEFAULT NULL,
  "PRIMARY_SECONDARY" int DEFAULT NULL,
  "LAST_UPDATED_DATE" timestamp DEFAULT NULL,
  "VOIDED" tinyint DEFAULT NULL,
  PRIMARY KEY (
    "ENCOUNTER_ID",
    "LOCATION_ID",
    "CONCEPT_GROUP",
    "CONCEPT_ID",
    "ANSWER_CONCEPT_ID"
  )
);
DROP TABLE IF EXISTS "PATIENT_DISPENSING";
CREATE TABLE "PATIENT_DISPENSING" (
  "PATIENT_ID" int NOT NULL,
  "VISIT_ID" int DEFAULT NULL,
  "LOCATION_ID" int DEFAULT '0' NOT NULL,
  "VISIT_DATE" timestamp DEFAULT NULL,
  "ENCOUNTER_ID" int NOT NULL,
  "PROVIDER_ID" int DEFAULT NULL,
  "DRUG_ID" int NOT NULL,
  "DOSE_DAY" int DEFAULT NULL,
  "PILLS_AMOUNT" int DEFAULT NULL,
  "DISPENSATION_DATE" date DEFAULT NULL,
  "NEXT_DISPENSATION_DATE" date DEFAULT NULL,
  "DISPENSATION_LOCATION" int DEFAULT '0',
  "ARV_DRUG" int DEFAULT '1066',
  "RX_OR_PROPHY" int DEFAULT NULL,
  "LAST_UPDATED_DATE" timestamp DEFAULT NULL,
  "VOIDED" tinyint DEFAULT NULL,
  PRIMARY KEY (
    "ENCOUNTER_ID",
    "LOCATION_ID",
    "DRUG_ID"
  ),
  INDEX "VISIT_DATE" ("VISIT_DATE"),
  INDEX "ENCOUNTER_ID" ("ENCOUNTER_ID"),
  INDEX "PATIENT_ID" ("PATIENT_ID")
);

DROP TABLE IF EXISTS "PATIENT_STATUS_ARV";
CREATE TABLE "PATIENT_STATUS_ARV" (
  "PATIENT_ID" INT NOT NULL DEFAULT '0',
  "ID_STATUS" INT NOT NULL DEFAULT '0',
  "START_DATE" DATE NOT NULL DEFAULT '0000-00-00',
  "ENCOUNTER_ID" INT DEFAULT NULL,
  "END_DATE" DATE DEFAULT NULL,
  "DIS_REASON" INT DEFAULT NULL,
  "LAST_UPDATED_DATE" DATETIME DEFAULT NULL,
  "DATE_STARTED_STATUS" DATETIME DEFAULT NULL,
  PRIMARY KEY (
  	"PATIENT_ID",
  	"ID_STATUS",
  	"START_DATE"
  )
);

DROP TABLE IF EXISTS "HEALTH_QUAL_PATIENT_VISIT";
CREATE TABLE "HEALTH_QUAL_PATIENT_VISIT" (
  "PATIENT_ID" INT NOT NULL DEFAULT '0',
  "ENCOUNTER_ID" INT NOT NULL DEFAULT '0',
  "VISIT_DATE" DATE DEFAULT NULL,
  "VISIT_ID" INT DEFAULT NULL,
  "LOCATION_ID" INT NOT NULL DEFAULT '0',
  "ENCOUNTER_TYPE" INT DEFAULT NULL,
  "PATIENT_BMI" DOUBLE DEFAULT NULL,
  "ADHERENCE_EVALUATION" INT DEFAULT NULL,
  "FAMILY_PLANNING_METHOD_USED" TINYINT DEFAULT '0',
  "EVALUATED_OF_TB" TINYINT DEFAULT '0',
  "NUTRITIONAL_ASSESSMENT_COMPLETED" TINYINT DEFAULT '0',
  "IS_ACTIVE_TB" TINYINT DEFAULT '0',
  "AGE_IN_YEARS" INT DEFAULT NULL,
  "LAST_INSERT_DATE" DATE DEFAULT NULL,
  "LAST_UPDATED_DATE" DATETIME DEFAULT NULL,
  "VOIDED" TINYINT DEFAULT NULL,
  PRIMARY KEY ("PATIENT_ID","ENCOUNTER_ID","LOCATION_ID")
);

DROP TABLE IF EXISTS "PATIENT_VISIT";
CREATE TABLE "PATIENT_VISIT" (
  "VISIT_DATE" DATE DEFAULT NULL,
  "VISIT_ID" INT DEFAULT NULL,
  "ENCOUNTER_ID" INT NOT NULL DEFAULT '0',
  "LOCATION_ID" INT NOT NULL DEFAULT '0',
  "PATIENT_ID" INT NOT NULL DEFAULT '0',
  "START_DATE" DATE DEFAULT NULL,
  "STOP_DATE" DATE DEFAULT NULL,
  "CREATOR" VARCHAR DEFAULT NULL,
  "ENCOUNTER_TYPE" INT DEFAULT NULL,
  "FORM_ID" INT DEFAULT NULL,
  "NEXT_VISIT_DATE" DATE DEFAULT NULL,
  "LAST_INSERT_DATE" DATE DEFAULT NULL,
  "LAST_UPDATED_DATE" DATETIME DEFAULT NULL,
  "VOIDED" TINYINT DEFAULT NULL,
  PRIMARY KEY ("PATIENT_ID","ENCOUNTER_ID","LOCATION_ID"),
);